<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Economic Mobility Guide</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;800&display=swap" rel="stylesheet">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/topojson-client@3"></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css' rel='stylesheet' />
    <script src='https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js'></script>
    <script src="script.js" defer></script>
    <script src="mapVis.js" defer></script>
</head>
<body>
    <header>
        <nav class="navigation">
            <div class="nav-content">
                <div class="logo">Economic Mobility Guide</div>
                <div class="nav-links">
                    <a href="#welcome" class="nav-link">Home</a>
                    <a href="#quiz-section" class="nav-link">Personalize</a>
                    <a href="#opportunity-map" class="nav-link">Opportunity Map</a>
                    <a href="#take-action" class="nav-link">Take Action</a>
                </div>
            </div>
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
        </nav>
    </header>

    <main class="container">
        <section id="welcome" class="welcome-section">
            <div class="welcome-content fade-in">
                <h1>Building Your Child's Future</h1>
                <p class="subtitle">A friendly guide to creating opportunities for your family</p>
                <p class="welcome-description">
                    Every parent dreams of giving their children the best possible future. We're here to help make that dream a reality. 
                    This guide will walk you through practical steps and valuable resources that can open doors for your children.
                </p>
                <div class="key-points">
                    <p>Here's what you'll discover:</p>
                    <ul>
                        <li>Simple steps to support your child's education</li>
                        <li>Financial resources and opportunities</li>
                        <li>Community programs and support services</li>
                    </ul>
                </div>
                <p class="encouragement">
                    Let's take this journey together, one step at a time.
                </p>
            </div>
        </section>

        <section id="learn-section" class="content-section">
            <div class="content">
                <h1>Where You Live Impacts Your Kids' Future</h1>
                <div id="map-vis"></div>
            
                <div class="map-explanation">
                    <div class="explanation-text">
                        <h2>Why do opportunities vary by area?</h2>
                        <p>Let's understand what makes some areas have more opportunities than others:</p>
                    </div>
                
                    <div class="opportunity-factors">
                        <div class="factor-card" data-factor="segregation">
                            <h3>Segregation</h3>
                            <p>How mixed or separated different communities are</p>
                            <button class="learn-more-btn">Learn More</button>
                        </div>
                        <div class="factor-card" data-factor="income">
                            <h3>Income Inequality</h3>
                            <p>The gap between high and low income families</p>
                            <button class="learn-more-btn">Learn More</button>
                        </div>
                        <div class="factor-card" data-factor="schools">
                            <h3>School Quality</h3>
                            <p>How good the local schools are</p>
                            <button class="learn-more-btn">Learn More</button>
                        </div>
                        <div class="factor-card" data-factor="family">
                            <h3>Family Structure</h3>
                            <p>Support systems within families</p>
                            <button class="learn-more-btn">Learn More</button>
                        </div>
                        <div class="factor-card" data-factor="social">
                            <h3>Social Capital</h3>
                            <p>Community connections and support</p>
                            <button class="learn-more-btn">Learn More</button>
                        </div>
                    </div>

                    <div class="better-future">
                        <h2>How Can We Do Better?</h2>
                        <div class="path-to-success">
                            <div class="step">
                                <div class="step-number">1</div>
                                <h3>Live in Good Areas</h3>
                                <p>Consider moving to areas with better opportunities</p>
                            </div>
                            <div class="step">
                                <div class="step-number">2</div>
                                <h3>Use Opportunities</h3>
                                <p>Take advantage of local programs and resources</p>
                            </div>
                            <div class="step">
                                <div class="step-number">3</div>
                                <h3>Good Education</h3>
                                <p>Focus on quality education and college preparation</p>
                            </div>
                            <div class="step">
                                <div class="step-number">4</div>
                                <h3>Career Success</h3>
                                <p>Build towards a rewarding career</p>
                            </div>
                        </div>
                    </div>

                    <div class="call-to-action">
                        <h2>Help Your Family!</h2>
                        <p>Ready to explore opportunities in your area?</p>
                        <button class="primary-btn" id="check-area-btn">Check Your Area</button>
                    </div>
                </div>
            </div>
        </section>

        <section id="quiz-section" class="content-section">
            <div class="quiz-container">
                <h2>Part 2: Personalization Quiz</h2>
                <p class="quiz-description">Help us provide personalized guidance for your family's future</p>
                
                <form id="personalization-form" class="quiz-form">
                    <div class="form-section parent-info">
                        <h3>Parent Information</h3>
                        <div class="parent-fields">
                            <div class="form-group">
                                <label for="zipCode">Zip Code*</label>
                                <input type="text" id="zipCode" name="zipCode" required pattern="[0-9]{5}" maxlength="5" placeholder="Enter zip code">
                            </div>
                            
                            <div class="form-group">
                                <label for="income">Annual Household Income*</label>
                                <select id="income" name="income" required>
                                    <option value="">Select income range</option>
                                    <option value="<25k">Less than $25,000</option>
                                    <option value="25-50k">$25,000 - $50,000</option>
                                    <option value="50-75k">$50,000 - $75,000</option>
                                    <option value="75-100k">$75,000 - $100,000</option>
                                    <option value=">100k">More than $100,000</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="country">Country of Origin (Optional)</label>
                                <input type="text" id="country" name="country" placeholder="Enter country">
                            </div>
                        </div>
                    </div>

                    <div class="form-section child-info">
                        <h3>Child Information</h3>
                        <div class="child-form">
                            <h4>Child 1</h4>
                            <div class="form-group">
                                <label for="child1-name">Name*</label>
                                <input type="text" id="child1-name" name="child1-name" required placeholder="Enter child's name">
                            </div>
                            
                            <div class="form-group">
                                <label for="child1-gender">Gender*</label>
                                <select id="child1-gender" name="child1-gender" required>
                                    <option value="">Select gender</option>
                                    <option value="M">Male</option>
                                    <option value="F">Female</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="child1-age">Age*</label>
                                <input type="number" id="child1-age" name="child1-age" min="0" max="18" required placeholder="Enter age">
                            </div>
                            
                            <div class="form-group">
                                <label for="child1-ethnicity">Ethnicity*</label>
                                <select id="child1-ethnicity" name="child1-ethnicity" required>
                                    <option value="">Select ethnicity</option>
                                    <option value="W">White</option>
                                    <option value="B">Black</option>
                                    <option value="H">Hispanic</option>
                                    <option value="A">Asian</option>
                                    <option value="NA">Native American</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <div class="submit-wrapper">
                            <button type="submit" class="submit-btn">Update Assessment</button>
                            <div class="success-checkmark" id="submit-success"></div>
                        </div>
                    </div>
                </form>
            </div>
        </section>

        <section id="opportunity-map" class="content-section">
            <div class="opportunity-container">
                <h2>Opportunity Map</h2>
                <p class="section-description">Explore economic mobility across different regions</p>
                <div class="map-wrapper">
                    <div id="map"></div>
                    <div class="view-mode-controls">
                        <button class="active" onclick="setViewMode('commuting-zones')">Commuting Zones</button>
                        <button onclick="setViewMode('census-tracts')">Census Tracts</button>
                    </div>
                </div>
            </div>
        </section>

        <section id="take-action" class="content-section">
            <div class="take-action-container">
                <h2>Take Action</h2>
                <p class="section-description">Based on your community's opportunity score, here are some actions you can consider:</p>

                <div class="score-summary">
                    <div class="current-score">
                        <h3>Your Community Score</h3>
                        <div class="score-circle">
                            <span id="community-score">5</span>
                            <span class="score-denominator">/10</span>
                        </div>
                    </div>
                    <div class="improvement-areas">
                        <h3>Areas for Improvement</h3>
                        <ul id="improvement-list">
                            <li>School Quality</li>
                            <li>Community Programs</li>
                        </ul>
                    </div>
                </div>

                <div class="action-options">
                    <h3>What would you like to do?</h3>
                    
                    <div class="action-cards">
                        <div class="action-card" id="stay-option">
                            <h4>Stay & Improve</h4>
                            <div class="card-content">
                                <div class="initial-content">
                                    <p>Work with your community to improve opportunities:</p>
                                    <ul>
                                        <li>Join the PTA or school board</li>
                                        <li>Advocate for better community programs</li>
                                        <li>Connect with local representatives</li>
                                        <li>Start community initiatives</li>
                                    </ul>
                                    <button class="action-btn stay-btn" id="stay-action-btn">Choose This Option</button>
                                </div>

                                <div class="detailed-view hidden" id="stay-detailed">
                                    <div class="township-info">
                                        <h5>Your Township</h5>
                                        <div class="township-details">
                                            <p id="township-name">Loading...</p>
                                            <a href="#" id="township-website" target="_blank">Visit Township Website</a>
                                        </div>
                                    </div>

                                    <div class="schools-section">
                                        <h5>Nearby Schools</h5>
                                        <div class="school-filters">
                                            <button class="filter-btn active" data-filter="all">All Schools</button>
                                            <button class="filter-btn" data-filter="elementary">Elementary</button>
                                            <button class="filter-btn" data-filter="middle">Middle</button>
                                            <button class="filter-btn" data-filter="high">High School</button>
                                        </div>
                                        <div class="schools-list" id="schools-list">
                                            <!-- Schools will be populated dynamically -->
                                        </div>
                                    </div>

                                    <div class="programs-section">
                                        <h5>Community Programs</h5>
                                        <div class="program-categories">
                                            <div class="program-category">
                                                <h6>Youth Development</h6>
                                                <div class="programs-grid" id="youth-programs"></div>
                                            </div>
                                            <div class="program-category">
                                                <h6>Education & Learning</h6>
                                                <div class="programs-grid" id="education-programs"></div>
                                            </div>
                                            <div class="program-category">
                                                <h6>Community Support</h6>
                                                <div class="programs-grid" id="community-programs"></div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="selected-items">
                                        <h5>Your Selections</h5>
                                        <div class="selected-school">
                                            <h6>Chosen School:</h6>
                                            <p id="selected-school-name">None selected</p>
                                        </div>
                                        <div class="selected-programs">
                                            <h6>Selected Programs:</h6>
                                            <ul id="selected-programs-list"></ul>
                                        </div>
                                        <button class="action-btn confirm-btn" id="confirm-selections">Confirm Selections</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="action-card" id="move-option">
                            <h4>Explore New Areas</h4>
                            <div class="card-content">
                                <p>Find communities with better opportunities:</p>
                                <ul>
                                    <li>View high-opportunity areas</li>
                                    <li>Compare school districts</li>
                                    <li>Analyze community programs</li>
                                    <li>Research housing options</li>
                                </ul>
                                <button class="action-btn move-btn">Choose This Option</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="action-plan-summary" class="content-section" style="display: none;">
            <div class="action-plan-container">
                <h2>Finalized Action Plan</h2>
                <p class="section-description">Here's a summary of your choices and next steps for your family's move.</p>

                <div class="action-plan-content">
                    <div id="child-info-section" class="summary-section">
                        <h3 id="child-name-header">Child Information</h3>
                        <div class="summary-grid">
                            <div class="summary-item">
                                <strong>Name:</strong>
                                <span id="summary-child-name">--</span>
                            </div>
                            <div class="summary-item">
                                <strong>Age:</strong>
                                <span id="summary-child-age">--</span>
                            </div>
                            <div class="summary-item">
                                <strong>Gender:</strong>
                                <span id="summary-child-gender">--</span>
                            </div>
                            <div class="summary-item">
                                <strong>Ethnicity:</strong>
                                <span id="summary-child-ethnicity">--</span>
                            </div>
                            <div class="summary-item">
                                <strong>Country of Origin:</strong>
                                <span id="summary-country">--</span>
                            </div>
                        </div>
                    </div>

                    <div class="summary-section">
                        <h3>Your Choices</h3>
                        <div class="summary-grid">
                            <div class="summary-item">
                                <strong>ZIP Code:</strong>
                                <span id="summary-zipcode">--</span>
                            </div>
                            <div class="summary-item">
                                <strong>Neighborhood:</strong>
                                <span id="summary-neighborhood">--</span>
                            </div>
                            <div class="summary-item">
                                <strong>Selected School:</strong>
                                <span id="summary-school">--</span>
                            </div>
                            <div class="summary-item">
                                <strong>Community Programs:</strong>
                                <span id="summary-programs">--</span>
                            </div>
                        </div>
                    </div>

                    <div class="next-steps summary-section">
                        <h3>Recommended Next Steps</h3>
                        <div class="checklist">
                            <div class="checklist-item">
                                <input type="checkbox" id="step1">
                                <label for="step1">Schedule a visit to the selected school</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="step2">
                                <label for="step2">Research housing options in the chosen neighborhood</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="step3">
                                <label for="step3">Contact community programs for enrollment information</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="step4">
                                <label for="step4">Plan moving logistics and timeline</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="step5">
                                <label for="step5">Gather required documents for school enrollment</label>
                            </div>
                        </div>
                    </div>

                    <div class="action-buttons">
                        <button id="edit-choices" class="secondary-btn">Edit My Choices</button>
                        <button id="download-summary" class="primary-btn">Download PDF Summary</button>
                    </div>
                </div>
            </div>
        </section>

        <section id="section1" class="content-section">
            <!-- Section 1 content will go here -->
        </section>

        <section id="section2" class="content-section">
            <!-- Section 2 content will go here -->
        </section>

        <section id="section3" class="content-section">
            <!-- Section 3 content will go here -->
        </section>

        <section id="section4" class="content-section">
            <!-- Section 4 content will go here -->
        </section>

        <section id="section5" class="content-section">
            <!-- Section 5 content will go here -->
        </section>

        <section id="section6" class="content-section">
            <!-- Section 6 content will go here -->
        </section>

    </main>

    <script src="scroll.js"></script>
    <script src="map.js"></script>
</body>
</html>
